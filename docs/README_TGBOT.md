# Telegram Audio Summarizer Bot

ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ĞºĞ¾Ğ½ÑĞ¿ĞµĞºÑ‚Ğ°Ñ‚Ğ¾Ñ€ Ğ°ÑƒĞ´Ğ¸Ğ¾-ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ Ğ² Telegram Ğ½Ğ° Ğ±Ğ°Ğ·Ğµ Whisper Ğ¸ Qwen-2.5 (Together AI).

---
ĞĞ¸ĞºĞ½ĞµĞ¹Ğ¼ Ğ±Ğ¾Ñ‚Ğ° @conspecatus_bot

##  ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ

Ğ­Ñ‚Ğ¾Ñ‚ Ğ±Ğ¾Ñ‚ Ğ¿Ñ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ñ‹Ğµ (OGG) Ğ¸Ğ»Ğ¸ Ğ°ÑƒĞ´Ğ¸Ğ¾ (MP3) ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ, Ñ‚Ñ€Ğ°Ğ½ÑĞºÑ€Ğ¸Ğ±Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¸Ñ… Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾ Ğ¿Ñ€Ğ¸ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰Ğ¸ OpenAI Whisper Ğ¸ Ğ·Ğ°Ñ‚ĞµĞ¼ Ğ¿Ñ€ĞµĞ´Ğ»Ğ°Ğ³Ğ°ĞµÑ‚ Ğ²Ğ°Ğ¼ Ñ‚Ñ€Ğ¸ Ñ€ĞµĞ¶Ğ¸Ğ¼Ğ° Ñ€ĞµÑ†ĞµĞ½Ğ·Ğ¸Ğ¸ (short / medium / long) Ñ‡ĞµÑ€ĞµĞ· Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ²ÑƒÑ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ Qwen-2.5-Instruct-Turbo (Together AI).  
Ğ”Ğ»Ñ ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¸Ñ… Ğ°ÑƒĞ´Ğ¸Ğ¾ (â‰¤5 Ñ) Ğ±Ğ¾Ñ‚ ÑÑ€Ğ°Ğ·Ñƒ ÑˆĞ»Ñ‘Ñ‚ Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚ Ñ‚Ñ€Ğ°Ğ½ÑĞºÑ€Ğ¸Ğ¿Ñ‚Ğ°, Ğ´Ğ»Ñ Ğ´Ğ»Ğ¸Ğ½Ğ½Ñ‹Ñ… â€” ÑĞ°Ğ¼Ğ¾ÑÑ‚Ğ¾ÑÑ‚ĞµĞ»ÑŒĞ½Ğ¾ Ğ¿Ñ€ĞµĞ´Ğ»Ğ°Ğ³Ğ°ĞµÑ‚ ĞºĞ½Ğ¾Ğ¿ĞºĞ¸ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° Ğ´Ğ»Ğ¸Ğ½Ñ‹ ĞºĞ¾Ğ½ÑĞ¿ĞµĞºÑ‚Ğ°, Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€ Â«â³ ĞĞ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°Ñâ€¦Â» Ğ¸ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚.

---

## Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸

- **Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ°Ñ Ñ‚Ñ€Ğ°Ğ½ÑĞºÑ€Ğ¸Ğ¿Ñ†Ğ¸Ñ** Ñ‡ĞµÑ€ĞµĞ· Whisper (FP32-Ñ€ĞµĞ¶Ğ¸Ğ¼, CPU-only)  
- **Ğ¢Ñ€Ğ¸ Ñ€ĞµĞ¶Ğ¸Ğ¼Ğ° ÑÑƒĞ¼Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ**:  
  - **short** â€” 2â€“3 Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ  
  - **medium** â€” 5â€“7 Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¹ (Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ)  
  - **long** â€” 10â€“15 Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¹  
- **Inline-ĞºĞ½Ğ¾Ğ¿ĞºĞ¸** Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° Ñ€ĞµĞ¶Ğ¸Ğ¼Ğ° ÑÑ€Ğ°Ğ·Ñƒ Ğ¿Ğ¾ÑĞ»Ğµ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ Ğ°ÑƒĞ´Ğ¸Ğ¾ (>5 Ñ)  
- **Ğ˜Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€ Ğ¾Ğ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ñ** Â«â³ ĞĞ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°Ñâ€¦Â» Ğ²Ğ¾ Ğ²Ñ€ĞµĞ¼Ñ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ° Ğº Qwen  
- **ĞĞ²Ñ‚Ğ¾-Ñ€Ğ°Ğ·Ğ±Ğ¸ĞµĞ½Ğ¸Ğµ** Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ² Ğ½Ğ° Ñ‡Ğ°ÑÑ‚Ğ¸ â‰¤ 4000 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ² Ğ´Ğ»Ñ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾Ğ¹ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¸ Ğ² Telegram  
- **ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº**: Ğ¿Ğ°Ğ´ĞµĞ½Ğ¸Ñ Whisper, Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸ API, Ğ¿Ñ€ĞµĞ²Ñ‹ÑˆĞµĞ½Ğ¸Ğµ Ğ´Ğ»Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸

---

## Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ¸ Ğ·Ğ°Ğ¿ÑƒÑĞº

1. **ĞšĞ»Ğ¾Ğ½Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹**  
   ```bash
   git clone https://your.repo.url/telegram-audio-summarizer.git
   cd telegram-audio-summarizer
   ````

2. **Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Conda-Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ğµ** (Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµÑ‚ÑÑ)

   ```bash
   conda create -n audiobot python=3.10 -y
   conda activate audiobot
   ```

3. **Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğµ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸**

   ```bash
   conda install -c conda-forge ffmpeg python-dotenv -y
   conda install -c pytorch pytorch cpuonly -y
   ```

4. **Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğµ Python-Ğ¿Ğ°ĞºĞµÑ‚Ñ‹**

   ```bash
   pip install \
     pyTelegramBotAPI \
     git+https://github.com/openai/whisper.git \
     together \
     python-dotenv
   ```

5. **Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ñ„Ğ°Ğ¹Ğ» Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞº** `.env` Ğ² ĞºĞ¾Ñ€Ğ½Ğµ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°:

   ```ini
   TG_TOKEN=Ğ²Ğ°Ñˆ_Ñ‚Ğ¾ĞºĞµĞ½_Ğ±Ğ¾Ñ‚Ğ°_Ğ¸Ğ·_BotFather
   TOGETHER_API_KEY=tsk_live_xxxxxxxx
   ```

6. **Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğµ Ğ±Ğ¾Ñ‚Ğ°**

   ```bash
   python bot_qwen_together.py
   ```

---

##  Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

1. Ğ’ Telegram Ğ½Ğ°Ğ¹Ğ´Ğ¸Ñ‚Ğµ Ğ²Ğ°ÑˆĞµĞ³Ğ¾ Ğ±Ğ¾Ñ‚Ğ° Ğ¿Ğ¾ ÑĞ·ĞµÑ€Ğ½ĞµĞ¹Ğ¼Ñƒ Ğ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ÑŒÑ‚Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñƒ `/start`.
2. ĞŸÑ€Ğ¸ÑˆĞ»Ğ¸Ñ‚Ğµ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ¾Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¸Ğ»Ğ¸ MP3 (â‰¤ 20 Ğ¼Ğ¸Ğ½).
3. * Ğ•ÑĞ»Ğ¸ Ğ°ÑƒĞ´Ğ¸Ğ¾ â‰¤ 5 Ñ â†’ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚Ğµ Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¹ Ñ‚Ñ€Ğ°Ğ½ÑĞºÑ€Ğ¸Ğ¿Ñ‚.
   * Ğ•ÑĞ»Ğ¸ Ğ°ÑƒĞ´Ğ¸Ğ¾ > 5 Ñ â†’ Ğ±Ğ¾Ñ‚ Ğ¿Ñ€Ğ¸ÑˆĞ»Ñ‘Ñ‚ Ñ‚Ñ€Ğ¸ ĞºĞ½Ğ¾Ğ¿ĞºĞ¸: **âš¡ short**, **ğŸ“„ medium**, **ğŸ“š long**.
4. ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ Ğ½ÑƒĞ¶Ğ½ÑƒÑ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ â†’ Ğ¿Ğ¾ÑĞ²Ğ¸Ñ‚ÑÑ Â«â³ ĞĞ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°Ñâ€¦Â» â†’ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚Ğµ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ñ‹Ğ¹ ĞºĞ¾Ğ½ÑĞ¿ĞµĞºÑ‚.

---

##  ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°
```bash
flowchart LR
  User -->|voice/mp3| Telegram
  Telegram -->|download file| Bot
  Bot -->|ffmpeg| WAV
  Bot -->|Whisper(fp16=False)| Text
  Text -->|pending_text| Bot
  Bot -->|InlineKeyboard| User
  User -->|mode selection| Bot
  Bot -->|Together AI (Qwen)| Summary
  Bot -->|send back| User
```
